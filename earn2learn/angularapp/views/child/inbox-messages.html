<style type="text/css">
    #search-wrapper {
        margin: 100px auto;
    }

    .cursor-pointer:hover {
        background-color: #EFEFEF;
    }
</style>

<section ng-init="loadChildMessage(0)" class="hbox">
    <div>
        <section class="vbox">
            <section class="scrollable m-b-xl">
                <div class="col-xs-12 col-md-8 col-md-offset-2">
                    <div class=" col-xs-12 col-md-12 bg-white wrapper m-t-md m-b-md">
                        <header class="header padder-v my-inbox"><h2 class="no-margin">My Inbox</h2></header>

                            <div ng-show="!loadingMessage">
                                <article class="media b-b wrapper-sm">
                                    <!--<div class="view-all-msg">
                                        <button class="btn bg-orange text-white" ng-click="showAllMessages()">View All Messages</button>
                                    </div>-->
                                    <div class="inbox-message-view" id="child-box" ng-scrollbars  ng-scrollbars-config="config">
                                        <div class="msg-container">
                                            <div ng-repeat="message in allMessages track by message.id"
                                                 ng-class="{'sent-msg': message.type ==0 , 'received-msg': message.type ==1}">
                                                <div ng-if="message.type ==1" class="user">{{message.f_name}} :</div>
                                                <div ng-if="message.type ==0" class="user">Me :</div>
                                                <div ng-class="(allMessage.status==0) ? 'unread-message' : 'read-message'"
                                                     class="msg-body">
                                                    <div class="chat-content">{{message.message}}</div>
                                                </div>
                                            </div>
                                            <h3 ng-if="allMessages.length == 0" class="text-center text-muted">
                                                There are no messages.</h3>
                                        </div>
                                    </div>
                                </article>
                                <form class="panel-body wrapper" name="addNewMessageForm" id="addNewMessageForm"
                                      ng-submit="addNewMessage(resources.newMessage,selectedParentId)"
                                      data-validate="parsley">
                                    <div class="form-group">
                                <textarea placeholder="Message " data-parsley-trigger="focusout"
                                          ng-model="resources.newMessage.message" class="form-control"
                                          data-required="true"
                                          required></textarea>
                                    </div>
                                    <div class="inline-btn-group">
                                        <a ui-sref="child.lessons" ui-sref-opts="{reload: true}"
                                           class="goBackbtn btn bg-orange btn-block btn-lg"><span
                                                class="fa fa-angle-left text"></span> Back to Lessons</a>

                                        <button type="submit"
                                                ng-disabled="resources.isSaving"
                                                class="btn bg-green pull-right no-margin"><span ng-show="resources.isSaving"><i
                                                class="fa fa-circle-o-notch fa-spin"></i></span> {{ sendButtonText }}
                                        </button>
                                    </div>
                                </form>
                            </div>

                    </div>
                </div>
            </section>
        </section>
    </div>
</section>
<section class="vbox" ng-if="loadingHouseMembers">
    <img src="includes/images/still-loading.svg" class="loading"/>
</section>

<script type="text/ng-template" id="readMessageBox">
    <div class="">
        <header class="panel-heading text-uc font-bold">Read Message
        </header>
        <article class="media b-b wrapper-sm">
            <div>
                <div><a ng-click="readMessage(inboxMessage)">{{inboxMessage.subject}}</a></div>
                <div class="media-body">
                    <div>{{inboxMessage.message}}</div>
                </div>
            </div>
        </article>
    </div>
</script>